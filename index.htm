<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS 109: Coffee Vendo Machine DFA</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Animated Background -->
    <div class="bg-animation" id="bgAnimation"></div>
    
    <!-- Loading Animation -->
    <div class="coffee-loading" id="loading">‚òï</div>
    
    <!-- Header -->
    <div class="header">
        <h1><i class="fas fa-coffee"></i> Coffee Vendo Machine DFA</h1>
        <h2>CS 109: Automata Theory with Coin-Operated Coffee Vendo</h2>
        <p>Interactive DFA simulation with coin insertion and vending mechanics</p>
    </div>
    
    <!-- Main Container -->
    <div class="container">
        <!-- Left Panel: Vendo Machine -->
        <div class="panel">
            <h3><i class="fas fa-coffee"></i> Vendo Machine Simulation</h3>
            
            <!-- Vendo Machine -->
            <div class="vendo-machine">
                <div class="machine-display">
                    <div class="display-scanline"></div>
                    <div>Vendo DFA</div>
                    <div class="state-display" id="currentState">INSERT COINS</div>
                    <div id="stateMessage">Insert coins to begin</div>
                </div>
                
                <!-- Coin Slot -->
                <div class="coin-slot" onclick="insertCoin(5)" title="Click to insert 5 peso coin">
                    <div class="coin-slot-label">COIN SLOT</div>
                </div>
                
                <!-- Money Display -->
                <div class="money-display">
                    ‚Ç±<span id="totalMoney">0.00</span>
                </div>
                
                <!-- Coffee Cup -->
                <div class="coffee-cup" id="coffeeCup" onclick="handleCupClick()" style="cursor: pointer;" title="Click to collect coffee when ready">
                    <div class="coffee-liquid" id="coffeeLiquid" style="height: 0%"></div>
                    <div class="steam" id="steamEffect"></div>
                </div>
            </div>
            
            <!-- Coin Selection -->
            <h4 style="margin: 20px 0 15px 0; color: var(--coin-gold);">
                <i class="fas fa-coins"></i> Insert Coins
            </h4>
            <div class="coin-selection" id="coinSelection">
                <div class="coin-option coin-1" onclick="insertCoin(1)">
                    <div class="coin-icon">ü™ô</div>
                    <div class="coin-value">‚Ç±1</div>
                </div>
                <div class="coin-option coin-5" onclick="insertCoin(5)">
                    <div class="coin-icon">ü™ô</div>
                    <div class="coin-value">‚Ç±5</div>
                </div>
                <div class="coin-option coin-10" onclick="insertCoin(10)">
                    <div class="coin-icon">ü™ô</div>
                    <div class="coin-value">‚Ç±10</div>
                </div>
                <div class="coin-option coin-20" onclick="insertCoin(20)">
                    <div class="coin-icon">ü™ô</div>
                    <div class="coin-value">‚Ç±20</div>
                </div>
            </div>
            
            <!-- Coffee Selection -->
            <h4 style="margin: 20px 0 15px 0; color: var(--coin-gold);">
                <i class="fas fa-list-alt"></i> Select Coffee (Price)
            </h4>
            <div class="coffee-selection" id="coffeeSelection">
                <div class="coffee-option" data-type="espresso" data-price="20">
                    <div class="coffee-icon">‚òï</div>
                    <div class="coffee-name">Espresso</div>
                    <div class="coffee-price">‚Ç±20</div>
                </div>
                <div class="coffee-option" data-type="latte" data-price="25">
                    <div class="coffee-icon">ü•õ</div>
                    <div class="coffee-name">Caf√© Latte</div>
                    <div class="coffee-price">‚Ç±25</div>
                </div>
                <div class="coffee-option" data-type="cappuccino" data-price="30">
                    <div class="coffee-icon">‚ú®</div>
                    <div class="coffee-name">Cappuccino</div>
                    <div class="coffee-price">‚Ç±30</div>
                </div>
                <div class="coffee-option" data-type="mocha" data-price="35">
                    <div class="coffee-icon">üç´</div>
                    <div class="coffee-name">Mocha</div>
                    <div class="coffee-price">‚Ç±35</div>
                </div>
            </div>
            
            <!-- Vendo Controls -->
            <div class="controls">
                <button class="control-btn btn-change" onclick="returnChange()" id="changeBtn">
                    <i class="fas fa-coins btn-icon"></i>
                    <span>RETURN</span>
                </button>
                <button class="control-btn btn-reset" onclick="resetMachine()">
                    <i class="fas fa-redo btn-icon"></i>
                    <span>RESET</span>
                </button>
            </div>
        </div>
        
        <!-- Right Panel: DFA Table -->
        <div class="panel">
            <h3><i class="fas fa-table"></i> DFA Transition Table</h3>
            
            <!-- DFA Table -->
            <div class="dfa-table-container">
                <table class="dfa-table" id="dfaTable">
                    <thead>
                        <tr>
                            <th>State (Q)</th>
                            <th>INSERT_COIN</th>
                            <th>SELECT</th>
                            <th>BREW</th>
                            <th>COLLECT</th>
                            <th>RETURN</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="state-cell">q‚ÇÄ (INSERT COINS)</td>
                            <td class="transition-cell" data-from="q0" data-input="INSERT_COIN">q‚ÇÅ</td>
                            <td class="transition-cell" data-from="q0" data-input="SELECT">‚Äî</td>
                            <td class="transition-cell" data-from="q0" data-input="BREW">‚Äî</td>
                            <td class="transition-cell" data-from="q0" data-input="COLLECT">‚Äî</td>
                            <td class="transition-cell" data-from="q0" data-input="RETURN">‚Äî</td>
                        </tr>
                        <tr>
                            <td class="state-cell">q‚ÇÅ (SELECTING)</td>
                            <td class="transition-cell" data-from="q1" data-input="INSERT_COIN">q‚ÇÅ</td>
                            <td class="transition-cell" data-from="q1" data-input="SELECT">q‚ÇÇ</td>
                            <td class="transition-cell" data-from="q1" data-input="BREW">‚Äî</td>
                            <td class="transition-cell" data-from="q1" data-input="COLLECT">‚Äî</td>
                            <td class="transition-cell" data-from="q1" data-input="RETURN">q‚ÇÄ</td>
                        </tr>
                        <tr>
                            <td class="state-cell">q‚ÇÇ (BREWING)</td>
                            <td class="transition-cell" data-from="q2" data-input="INSERT_COIN">‚Äî</td>
                            <td class="transition-cell" data-from="q2" data-input="SELECT">‚Äî</td>
                            <td class="transition-cell" data-from="q2" data-input="BREW">q‚ÇÉ</td>
                            <td class="transition-cell" data-from="q2" data-input="COLLECT">‚Äî</td>
                            <td class="transition-cell" data-from="q2" data-input="RETURN">q‚ÇÄ</td>
                        </tr>
                        <tr>
                            <td class="state-cell accept-state">q‚ÇÉ (READY) ‚úì</td>
                            <td class="transition-cell" data-from="q3" data-input="INSERT_COIN">‚Äî</td>
                            <td class="transition-cell" data-from="q3" data-input="SELECT">‚Äî</td>
                            <td class="transition-cell" data-from="q3" data-input="BREW">‚Äî</td>
                            <td class="transition-cell" data-from="q3" data-input="COLLECT">q‚ÇÄ</td>
                            <td class="transition-cell" data-from="q3" data-input="RETURN">q‚ÇÄ</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- Vendo Statistics -->
            <div class="coffee-info">
                <div class="coffee-stats">
                    <div class="stat-box">
                        <div class="stat-value" id="totalTransitions">0</div>
                        <div class="stat-label">Transitions</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="coffeesMade">0</div>
                        <div class="stat-label">Coffees Made</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="totalMoneyInserted">‚Ç±0</div>
                        <div class="stat-label">Money Inserted</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="currentStateCode">q‚ÇÄ</div>
                        <div class="stat-label">Current State</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Bottom Panel: History & Controls -->
        <div class="panel full-panel">
            <h3><i class="fas fa-history"></i> Transition History & Controls</h3>
            
            <!-- Database Controls -->
            <div class="database-controls">
                <button class="db-btn" onclick="exportToTextFile()">
                    <i class="fas fa-file-export"></i> Export Log
                </button>
                <button class="db-btn" onclick="exportToJSON()">
                    <i class="fas fa-code"></i> Export JSON
                </button>
                <button class="db-btn" onclick="viewDatabase()">
                    <i class="fas fa-eye"></i> View Stats
                </button>
                <button class="db-btn" onclick="clearDatabase()">
                    <i class="fas fa-trash"></i> Clear Log
                </button>
                <button class="db-btn" onclick="runAutoDemo()">
                    <i class="fas fa-robot"></i> Auto Demo
                </button>
                <button class="db-btn" onclick="showDFADetails()">
                    <i class="fas fa-info-circle"></i> DFA Info
                </button>
            </div>
            
            <!-- Transition History -->
            <h4 style="margin: 25px 0 15px 0; color: var(--coin-gold);">
                <i class="fas fa-stream"></i> Live Transaction History
            </h4>
            <div class="history-log" id="historyLog">
                <div class="log-entry">
                    <div class="log-transition">
                        <i class="fas fa-power-on" style="color: var(--vendo-green);"></i>
                        <span>Vendo DFA initialized at state q‚ÇÄ (INSERT COINS)</span>
                    </div>
                    <div class="log-time">
                        <i class="far fa-clock"></i> Ready for coin insertion
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>